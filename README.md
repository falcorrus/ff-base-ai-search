# ff-base-ai-search

Интеллектуальная система поиска по базе знаний пользователя, хранящейся в виде Markdown-файлов в локальной директории.

## Описание проекта

Этот проект представляет собой веб-приложение для интеллектуального поиска и генерации комплексных ответов на основе личной базы знаний, состоящей из Markdown заметок, хранящихся в локальной директории FF-BASE.

Проект использует векторный поиск и большие языковые модели (LLM) для предоставления быстрых и точных ответов на основе базы знаний пользователя. Недавно была восстановлена полная база данных эмбеддингов, содержащая все 276 заметок.

## Ключевые технологии

* **Бэкенд:** Python 3.9+, FastAPI
* **ИИ:** Google Gemini API (для генерации embeddings и ответов)
* **Хранилище данных:** Локальное JSON хранилище (для embeddings)
* **Фронтенд:** Vanilla JavaScript (в процессе разработки)
* **Деплой:** Google Cloud Run (бэкенд), Firebase Hosting (фронтенд)

## Архитектура

1. **Синхронизация:** Получение Markdown заметок из локальной директории `FF-BASE`
2. **Генерация embeddings:** Создание и хранение векторных представлений для каждой заметки с использованием Google Gemini API
3. **Поиск:** Преобразование пользовательского запроса в embedding и поиск релевантных заметок через векторное сходство
4. **Генерация ответа:** Формирование контекста из релевантных заметок и отправка его в Google Gemini LLM для генерации комплексного ответа
5. **Поддержка русского языка:** Полная поддержка поисковых запросов на русском языке с использованием кодировки UTF-8

## Инициализация базы знаний

База данных эмбеддингов может быть инициализирована или обновлена с помощью скрипта `init_knowledge_base.py`, который обрабатывает все Markdown файлы в директории FF-BASE и генерирует для каждого соответствующие векторные представления. Файл `knowledge_base/embeddings.json` содержит векторные представления всех 276 заметок.

## Структура проекта

```
ff-base-ai-search/
├── backend/                 # Бэкенд приложение на FastAPI
│   ├── main.py             # Основной файл приложения
│   ├── requirements.txt    # Зависимости Python
│   ├── init_knowledge_base.py # Скрипт для инициализации базы знаний из FF-BASE
│   └── .env                # Переменные окружения
├── frontend/               # Фронтенд приложение (в разработке)
│   ├── index.html          # Главная страница
│   ├── style.css           # Стили
│   └── script.js           # JavaScript код
├── FF-BASE/                # Локальное хранилище Markdown заметок (276 файлов)
├── knowledge_base/         # Локальное хранилище embeddings
│   └── embeddings.json     # Векторные представления заметок (276 записей)
└── DOCUMENTATION.md        # Документация проекта
```

## Установка и запуск

### Бэкенд

1. Установите зависимости:
   ```bash
   pip install -r backend/requirements.txt
   ```

2. Создайте файл `.env` с необходимыми переменными окружения:
   ```bash
   GOOGLE_API_KEY=ваш_google_gemini_api_key
   LOG_LEVEL=INFO
   ```

3. Запустите сервер:
   ```bash
   cd backend
   uvicorn main:app --reload --port 8000
   ```

### Фронтенд

1. Откройте `frontend/index.html` в браузере или запустите локальный сервер:
   ```bash
   cd frontend
   python -m http.server 3000
   ```

## API эндпоинты

* `GET /` - Проверка работы сервера
* `GET /search?query={запрос}&top_k={количество}` - Поиск по заметкам и генерация ответа
  * `query` (обязательный) - текст поискового запроса (поддерживает русский язык)
  * `top_k` (опциональный) - количество возвращаемых результатов (по умолчанию 5)
* `GET /notes-count` - Получение количества заметок в базе знаний
* `GET /update-knowledge-base-local` - Обновление базы знаний из локальной директории

## Деплой

* **Бэкенд:** Google Cloud Run
* **Фронтенд:** Firebase Hosting

## Документация

Полная документация проекта доступна в файле [DOCUMENTATION.md](DOCUMENTATION.md)

## Лицензия

MIT