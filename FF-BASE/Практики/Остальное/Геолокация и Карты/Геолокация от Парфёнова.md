–ò—Å—Ç–æ—á–Ω–∏–∫: https://t.me/flutterflow_rus/12427/58663

> [!INFO] –î–æ—Ä–∞–±–æ—Ç–∞–Ω–æ @brozaurus –∏ Gemini 

### **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –≤ FlutterFlow**

–≠—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Å–æ–∑–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏ –≤—ã–∑–≤–∞—Ç—å –µ—ë –ø–æ –Ω–∞–∂–∞—Ç–∏—é –Ω–∞ –∫–Ω–æ–ø–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä).

---

### **–®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Custom Function (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –§—É–Ω–∫—Ü–∏–∏) ‚öôÔ∏è**

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **Custom Code**.
    
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **Custom Functions** –∏ –Ω–∞–∂–º–∏—Ç–µ **+ Create**.
    
3. –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –∏–º—è –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, `getCurrentPosition`.
    
---

### **–®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π üì¶**

–í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –æ–∫–Ω–µ –≤–∞–º –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—â–µ–π:

1. **Return Value**: –£–∫–∞–∂–∏—Ç–µ —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å. –¢–∞–∫ –∫–∞–∫ –Ω–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–¥–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø **LatLng**.
    
2. **Function Arguments**: –ù–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ –ø–æ–ª–µ –ø—É—Å—Ç—ã–º.
    
3. **Pubspec Dependencies**: –ó–¥–µ—Å—å –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–¥. –ù–∞–∂–º–∏—Ç–µ **+ Add Dependency** –∏ –≤–≤–µ–¥–∏—Ç–µ:
    
    - `geolocator: ^11.0.0`
        
    - –ù–∞–∂–º–∏—Ç–µ Enter. –≠—Ç–æ –¥–æ–±–∞–≤–∏—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π.
        
4. **Code Editor**: –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à –∫–æ–¥ –≤ –ø–æ–ª–µ –¥–ª—è –∫–æ–¥–∞.
    
    **–í–∞–∂–Ω–æ**: FlutterFlow –¥–ª—è —Ç–∏–ø–∞ `LatLng` —Ç—Ä–µ–±—É–µ—Ç –∏–º–ø–æ—Ä—Ç –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Google –ö–∞—Ä—Ç. –ü–æ—ç—Ç–æ–º—É –≤–∞—à –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫ (—Å –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–π –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π):
    
    Dart
    
    ```dart
    import 'package:google_maps_flutter/google_maps_flutter.dart'; // <-- –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É
    import 'package:geolocator/geolocator.dart';
    
    Future<LatLng> getCurrentPosition() async {
      final serviceEnabled = await Geolocator.isLocationServiceEnabled();
      if (!serviceEnabled) {
        throw Exception("Location services are disabled");
      }
    
      var permission = await Geolocator.checkPermission();
      if (permission == LocationPermission.denied) {
        permission = await Geolocator.requestPermission();
        if (permission == LocationPermission.denied) {
          throw Exception("Location permissions are denied");
        }
      }
    
      if (permission == LocationPermission.deniedForever) {
        throw Exception("Location permissions are permanently denied");
      }
    
      final position = await Geolocator.getCurrentPosition(
        desiredAccuracy: LocationAccuracy.high,
      );
    
      return LatLng(position.latitude, position.longitude);
    }
    ```
    
5. –ù–∞–∂–º–∏—Ç–µ **Save** –∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ FlutterFlow –ø—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ–¥ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫.
    

---

### **–®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –≤ –ø—Ä–æ–µ–∫—Ç–µ üîê**

–ß—Ç–æ–±—ã –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–≥–ª–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é, –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ.

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings & Integrations** -> **App Settings**.
    
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **Permissions**.
    
3. –ù–∞–π–¥–∏—Ç–µ **Location Permission** –∏ –≤–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å.
    
4. –í –ø–æ–ª–µ **Permission Message** –Ω–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∏—Ç –¥–æ—Å—Ç—É–ø. –ù–∞–ø—Ä–∏–º–µ—Ä: "–≠—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –∫–∞—Ä—Ç–µ."
    

---

### **–®–∞–≥ 4: –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–∫–∏ üëÜ**

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é.

1. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞ –ª—é–±—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–∏–¥–∂–µ—Ç **Button**.
    
2. –í—ã–¥–µ–ª–∏—Ç–µ —ç—Ç—É –∫–Ω–æ–ø–∫—É –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Actions** (—Å–ø—Ä–∞–≤–∞).
    
3. –ù–∞–∂–º–∏—Ç–µ **+ Add Action**.
    
4. –í —Å–ø–∏—Å–∫–µ –¥–µ–π—Å—Ç–≤–∏–π –≤—ã–±–µ—Ä–∏—Ç–µ **Custom Action** -> **[–∏–º—è –≤–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏]** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `getCurrentPosition`).
    
5. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≤–∞–º –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏. –í –ø–æ–ª–µ **Action Output Variable Name** –≤–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, `userLocation`.
    
6. –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `userLocation` —Ç–∏–ø–∞ `LatLng`, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –µ—ë –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –ø–æ–ª–µ –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –≤–∏–¥–∂–µ—Ç Google Maps –¥–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—Ä—Ç—ã.
    

–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ –ø–æ—Å—Ç–∞—Ä–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
